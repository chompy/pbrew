"php-7.4": &php
  brew_name: "php@7.4"
  start: |
    {BREW_PATH}/opt/{BREW_APP}/sbin/php-fpm -D --fpm-config {CONF_FILE} -g {PID_FILE}
  stop: |
    pkill -F {PID_FILE}
  post_install: |
    {BREW_PATH}/opt/{BREW_APP}/bin/pecl config-set php_dir {BREW_PATH}/opt/{BREW_APP}/share/{BREW_APP}/pear
    {BREW_PATH}/opt/{BREW_APP}/bin/pecl config-set doc_dir {BREW_PATH}/opt/{BREW_APP}/share/{BREW_APP}/pear/doc
    {BREW_PATH}/opt/{BREW_APP}/bin/pecl config-set ext_dir {BREW_PATH}/opt/{BREW_APP}/lib/php
    {BREW_PATH}/opt/{BREW_APP}/bin/pecl config-set test_dir {BREW_PATH}/opt/{BREW_APP}/share/{BREW_APP}/pear/test
  config_templates: 
    "php_fpm.conf.tmpl" : "{CONF_FILE}"
    "php.ini.tmpl" : "{DATA_PATH}/php.ini"
  dependencies:
    - "node"
    - "ruby@2.4"

"php-7.3":
  <<: *php
  brew_name: "php@7.3"

"php-7.2":
  <<: *php
  brew_name: "php@7.2"

"php-7.1":
  <<: *php
  brew_name: "php@7.1"

"php-7.0":
  <<: *php
  brew_name: "php@7.0"

"php-5.6":
  <<: *php
  brew_name: "php@5.6"

"mariadb-*": &mariadb
  brew_name: "mariadb@10.6"
  start: |
    {BREW_PATH}/opt/mariadb@10.6/bin/mysql_install_db --defaults-file={CONF_FILE}
    {BREW_PATH}/opt/mariadb@10.6/bin/mysqld_safe --defaults-file={CONF_FILE} --nowatch --pid-file={PID_FILE} --init-file={APP_PATH}/conf/mariadb_init.txt
  stop: |
    pkill -F {PID_FILE}
  config_templates: 
    "mariadb.conf.tmpl" : "{CONF_FILE}"

"mysql-*":
  <<: *mariadb

"redis-*": &redis
  brew_name: "redis@6.2"
  start: |
    {BREW_PATH}/opt/redis/bin/redis-server {CONF_FILE}
  stop: |
    pkill -F {PID_FILE}
  config_templates: 
    "redis.conf.tmpl" : "{CONF_FILE}"

"redis-persistent-*":
  <<: *redis